
> [!NOTE] 为什么需要管道
> Redis是一种基于客户端-服务端模型以及请求/响应协议的TCP服务。一个请求会遵循以下步骤：
> 1. 客户端向服务端发送命令分将四步(发送命令→命令排队→命令执行→返回结果)，并监听Socket返回，通常以阻塞模式等待服务端响应。
> 2. 服务端处理命令，并将结果返回给客户端。  
> 如果同时需要执行大量的命令，那么就要等待上一条命令应答后再执行，这中间不仅仅多了RTT（Round Time Trip），而且还频繁调用系统IO，会对系统的性能产生影响。
> 



> [!conclusion]  什么是管道
> pipeline是将一组命令打包发送，来减少`RTT`往返时延



> [!NOTE] 
> 1. 管道不保证原子性
> 2. 管道的中命令的数量不能太多
> 3. 类似于`mset`这样命令，但`mset`具有原子性，`mset`是通过服务端执行的，管道是客户端+服务端



> [!example] 案例
> 
1. 先准备一个`pipe.txt`文件
![[CleanShot 2024-01-18 at 14.53.07@2x.png]]

2. 在linux的命令行中输入如下的命令
![[CleanShot 2024-01-18 at 15.02.37@2x.png]]
3. 登录redis的客户端中，查看上述的key是否存在